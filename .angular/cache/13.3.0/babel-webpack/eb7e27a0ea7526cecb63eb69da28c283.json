{"ast":null,"code":"import { moveItemInArray } from '@angular/cdk/drag-drop';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { ConfirmDialogComponent } from './confirm-dialog/confirm-dialog.component';\nimport { UserColumns } from './model/user';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"./services/user.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/material/tabs\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/table\";\nimport * as i7 from \"@angular/cdk/drag-drop\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/forms\";\nconst _c0 = [\"dataTable\"];\n\nfunction AppComponent_ng_container_11_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", col_r5.label, \" \");\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AppComponent_ng_container_11_td_2_div_1_div_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const element_r9 = i0.ɵɵnextContext(2).$implicit;\n      return element_r9.isEdit = !element_r9.isEdit;\n    });\n    i0.ɵɵtext(2, \" Edit \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function AppComponent_ng_container_11_td_2_div_1_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const element_r9 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return ctx_r17.removeRow(element_r9.id);\n    });\n    i0.ɵɵtext(4, \" Delete \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_div_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r9 = i0.ɵɵnextContext(2).$implicit;\n    const col_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r9[col_r5.key], \" \");\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, AppComponent_ng_container_11_td_2_div_1_div_1_Template, 5, 0, \"div\", 17);\n    i0.ɵɵtemplate(2, AppComponent_ng_container_11_td_2_div_1_span_2_Template, 2, 1, \"span\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"ngSwitch\", col_r5.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"isEdit\");\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_div_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AppComponent_ng_container_11_td_2_div_2_div_2_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const element_r9 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return ctx_r25.editRow(element_r9);\n    });\n    i0.ɵɵtext(2, \" Done \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_div_2_mat_form_field_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-form-field\", 24)(1, \"input\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function AppComponent_ng_container_11_td_2_div_2_mat_form_field_3_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const element_r9 = i0.ɵɵnextContext(2).$implicit;\n      const col_r5 = i0.ɵɵnextContext().$implicit;\n      return element_r9[col_r5.key] = $event;\n    })(\"change\", function AppComponent_ng_container_11_td_2_div_2_mat_form_field_3_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const element_r9 = i0.ɵɵnextContext(2).$implicit;\n      const col_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.inputHandler($event, element_r9.id, col_r5.key);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const element_r9 = i0.ɵɵnextContext(2).$implicit;\n    const col_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"required\", col_r5.required)(\"pattern\", col_r5.pattern)(\"type\", col_r5.type)(\"ngModel\", element_r9[col_r5.key]);\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, AppComponent_ng_container_11_td_2_div_2_div_1_Template, 1, 0, \"div\", 22);\n    i0.ɵɵtemplate(2, AppComponent_ng_container_11_td_2_div_2_div_2_Template, 3, 0, \"div\", 17);\n    i0.ɵɵtemplate(3, AppComponent_ng_container_11_td_2_div_2_mat_form_field_3_Template, 2, 4, \"mat-form-field\", 23);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"ngSwitch\", col_r5.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"isSelected\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"isEdit\");\n  }\n}\n\nfunction AppComponent_ng_container_11_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtemplate(1, AppComponent_ng_container_11_td_2_div_1_Template, 3, 2, \"div\", 15);\n    i0.ɵɵtemplate(2, AppComponent_ng_container_11_td_2_div_2_Template, 4, 3, \"div\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !element_r9.isEdit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", element_r9.isEdit);\n  }\n}\n\nfunction AppComponent_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 10);\n    i0.ɵɵtemplate(1, AppComponent_ng_container_11_th_1_Template, 2, 1, \"th\", 11);\n    i0.ɵɵtemplate(2, AppComponent_ng_container_11_td_2_Template, 3, 2, \"td\", 12);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const col_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"matColumnDef\", col_r5.key);\n  }\n}\n\nfunction AppComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 26);\n  }\n}\n\nfunction AppComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 27);\n  }\n}\n\nfunction AppComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(dialog, userService, _snackBar) {\n      this.dialog = dialog;\n      this.userService = userService;\n      this._snackBar = _snackBar;\n      this.displayedColumns = UserColumns.map(col => col.key);\n      this.columnsSchema = UserColumns; // dataSource = new MatTableDataSource<User>();\n\n      this.dataSource = new MatTableDataSource();\n      this.valid = {};\n      this.TEST_DATA = [{\n        id: 1,\n        displayName: 'HP Support',\n        link: 'https://support.hp.com',\n        description: `Hydrogen is a chemical element with symbol H and atomic number 1. With a standard\n        atomic link of 1.008, hydrogen is the lightest element on the periodic table.`\n      }, {\n        id: 2,\n        displayName: 'HP Forum',\n        link: 'https://forum.hp.com',\n        description: `Hydrogen is a chemical element with symbol H and atomic number 1. With a standard\n        atomic link of 1.008, hydrogen is the lightest element on the periodic table.`\n      }, {\n        id: 3,\n        \"displayName\": \"HP Troubleshooting Guide\",\n        \"link\": \"https://www.verifyemailaddress.org/#result\",\n        description: `Hydrogen is a chemical element with symbol H and atomic number 1. With a standard\n        atomic link of 1.008, hydrogen is the lightest element on the periodic table.`\n      }, {\n        id: 4,\n        \"displayName\": \"HP Troubleshooting Guide\",\n        \"link\": \"https://www.verifyemailaddress.org/#result\",\n        description: `Hydrogen is a chemical element with symbol H and atomic number 1. With a standard\n        atomic link of 1.008, hydrogen is the lightest element on the periodic table.`\n      }];\n      this.ELEMENT_DATA = [{\n        ID: 1,\n        DisplayName: 'HP Support',\n        Link: 'https://forum.hp.com'\n      }, {\n        ID: 2,\n        DisplayName: 'HP Troubleshooting',\n        Link: 'https://forum.hp.com'\n      }, {\n        ID: 3,\n        DisplayName: 'HP customer',\n        Link: 'https://forum.hp.com'\n      }, {\n        ID: 4,\n        DisplayName: 'HP Home',\n        Link: 'https://forum.hp.com'\n      }, {\n        ID: 5,\n        DisplayName: 'HP India',\n        Link: 'https://forum.hp.com'\n      }, {\n        ID: 6,\n        DisplayName: 'HP regional',\n        Link: 'https://forum.hp.com'\n      }];\n      this.dataSource1 = this.ELEMENT_DATA;\n      this.columnsToDisplay = ['DisplayName', 'Link'];\n    }\n\n    ngOnInit() {\n      this.userService.getUsers().subscribe(res => {\n        this.dataSource.data = this.TEST_DATA; // this.dataSource.data = res;\n      });\n    }\n\n    dropTable(event) {\n      moveItemInArray(this.dataSource.filteredData, event.previousIndex, event.currentIndex);\n      this.table.renderRows();\n    }\n\n    editRow(row) {\n      if (row.id === 0) {\n        this.userService.addUser(row).subscribe(newUser => {\n          row.id = newUser.id;\n          row.isEdit = false;\n        });\n      } else {\n        this.userService.updateUser(row).subscribe(() => row.isEdit = false);\n      }\n    }\n\n    addRow() {\n      const newRow = {\n        id: 0,\n        displayName: '',\n        link: '',\n        status: '',\n        isEdit: true,\n        isSelected: false\n      };\n      this.dataSource.data = [newRow, ...this.dataSource.data];\n    }\n\n    removeRow(id) {\n      const users = this.dataSource.data.filter(u => u.isSelected);\n      this.dialog.open(ConfirmDialogComponent).afterClosed().subscribe(confirm => {\n        if (confirm) {\n          this.userService.deleteUser(id).subscribe(() => {\n            this.dataSource.data = this.dataSource.data.filter(u => u.id !== id);\n          });\n        }\n      });\n    }\n\n    removeSelectedRows() {\n      const users = this.dataSource.data.filter(u => u.isSelected);\n      this.dialog.open(ConfirmDialogComponent).afterClosed().subscribe(confirm => {\n        if (confirm) {\n          this.userService.deleteUsers(users).subscribe(() => {\n            this.dataSource.data = this.dataSource.data.filter(u => !u.isSelected);\n          });\n        }\n      });\n    }\n\n    inputHandler(e, id, key) {\n      if (!this.valid[id]) {\n        this.valid[id] = {};\n      }\n\n      this.valid[id][key] = e.target.validity.valid;\n    }\n\n    disableSubmit(id) {\n      if (this.valid[id]) {\n        return Object.values(this.valid[id]).some(item => item === false);\n      }\n\n      return false;\n    }\n\n    openSnackBar() {\n      this.userService.openSnackBar('Data saved successfully', 'Done');\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    viewQuery: function AppComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n      }\n    },\n    decls: 15,\n    vars: 4,\n    consts: [[\"mat-align-tabs\", \"start\"], [\"label\", \"Resource Links\"], [1, \"table-header\", 2, \"padding\", \"20px\"], [\"mat-button\", \"\", 1, \"button-add-row\", 3, \"click\"], [\"mat-table\", \"\", \"fxFlex\", \"\", \"cdkDropList\", \"\", 2, \"width\", \"100%\", 3, \"dataSource\", \"cdkDropListDropped\"], [\"dataTable\", \"\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", \"cdkDrag\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [4, \"cdkDragPlaceholder\"], [3, \"matColumnDef\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [3, \"ngSwitch\", 4, \"ngIf\"], [3, \"ngSwitch\"], [\"class\", \"btn-edit\", 4, \"ngSwitchCase\"], [4, \"ngSwitchDefault\"], [1, \"btn-edit\"], [\"mat-button\", \"\", 3, \"click\"], [\"mat-button\", \"\", 1, \"button-remove\", 3, \"click\"], [4, \"ngSwitchCase\"], [\"class\", \"form-input\", 4, \"ngSwitchDefault\"], [1, \"form-input\"], [\"matInput\", \"\", 3, \"required\", \"pattern\", \"type\", \"ngModel\", \"ngModelChange\", \"change\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", \"cdkDrag\", \"\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-tab-group\", 0)(1, \"mat-tab\", 1)(2, \"article\", 2)(3, \"div\")(4, \"p\");\n        i0.ɵɵtext(5, \"List of Resources Links for the selected User Type and Locale Combination\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\")(7, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_7_listener() {\n          return ctx.addRow();\n        });\n        i0.ɵɵtext(8, \" Add New Link \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"table\", 4, 5);\n        i0.ɵɵlistener(\"cdkDropListDropped\", function AppComponent_Template_table_cdkDropListDropped_9_listener($event) {\n          return ctx.dropTable($event);\n        });\n        i0.ɵɵtemplate(11, AppComponent_ng_container_11_Template, 3, 1, \"ng-container\", 6);\n        i0.ɵɵtemplate(12, AppComponent_tr_12_Template, 1, 0, \"tr\", 7);\n        i0.ɵɵtemplate(13, AppComponent_tr_13_Template, 1, 0, \"tr\", 8);\n        i0.ɵɵtemplate(14, AppComponent_div_14_Template, 1, 0, \"div\", 9);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.columnsSchema);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      }\n    },\n    directives: [i4.MatTabGroup, i4.MatTab, i5.MatButton, i6.MatTable, i7.CdkDropList, i8.NgForOf, i6.MatColumnDef, i6.MatHeaderCellDef, i6.MatHeaderCell, i6.MatCellDef, i6.MatCell, i8.NgIf, i8.NgSwitch, i8.NgSwitchCase, i8.NgSwitchDefault, i9.MatFormField, i10.MatInput, i11.DefaultValueAccessor, i11.RequiredValidator, i11.PatternValidator, i11.NgControlStatus, i11.NgModel, i6.MatHeaderRowDef, i6.MatHeaderRow, i6.MatRowDef, i6.MatRow, i7.CdkDrag, i7.CdkDragPlaceholder],\n    styles: [\".mat-tab-label{color:#000!important}p[_ngcontent-%COMP%]{font-family:Lato}.mat-table[_ngcontent-%COMP%]{background:#424242}table[_ngcontent-%COMP%]{width:90%;margin:25px auto auto}.btn-edit[_ngcontent-%COMP%]{text-align:right}h2[_ngcontent-%COMP%]{text-align:center;padding-top:20px}.table-header[_ngcontent-%COMP%]{width:auto;margin:auto auto 10px;text-align:right;display:flex;align-items:center;justify-content:space-between}.button-add-row[_ngcontent-%COMP%]{background:#0e9fbf;color:#fff}.button-remove-rows[_ngcontent-%COMP%]{background:red;color:#fff;margin-right:5px}.button-remove[_ngcontent-%COMP%]{color:red}  .mat-form-field-infix{width:100%!important}.form-input[_ngcontent-%COMP%]{padding-right:5px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;height:48px;background-color:gray;display:table}.cdk-drag-preview[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{flex-grow:2;font-size:14px;padding:4px;vertical-align:middle}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#000}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}p[_ngcontent-%COMP%]{color:#0e9fbf;font-size:large;font-weight:700;font-family:inherit}table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:black}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:black}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:block}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}\"],\n    data: {\n      animation: [trigger('detailExpand', [state('collapsed', style({\n        height: '0px',\n        minHeight: '0'\n      })), state('expanded', style({\n        height: '*'\n      })), transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)'))])]\n    }\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}